<html>
<head>
	<title>Code 128-B Barcode Generator</title>
	<script type='text/javascript'>!function(){void 0===window.BG&&(window.BG={}),window.BG.inherits=function(i,t){function n(){}n.prototype=t.prototype,i.prototype=new n};var i=window.BG.Symbology=function(){this.loadChrToVal(),this.loadValToBin()};i.prototype.mapping=[{chr:void 0,val:void 0,bin:void 0}],i.prototype.loadChrToVal=function(){this.chrToVal={},this.mapping.forEach(i=>{this.chrToVal[i.chr]=i.val})},i.prototype.loadValToBin=function(){this.valToBin={},this.mapping.forEach(i=>{this.valToBin[i.val]=i.bin})},i.prototype.sanitize=function(i){var t=Object.keys(this.chrToVal);return i.split("").filter(i=>t.indexOf(i)>-1).join("")},i.prototype.translate=function(i){return i.split("").map(i=>this.chrToVal[i])},i.prototype.checksum=function(i){},i.prototype.addMeta=function(i){},i.prototype.doEncode=function(i){return i.map(i=>this.valToBin[i]).join("")},i.prototype.encode=function(i){var t=this.sanitize(i),n=this.translate(t),h=this.addMeta(n);return[this.doEncode(h),t]}}(),function(){void 0===window.BG&&(window.BG={});var i=window.BG.Code128B=function(){BG.Symbology.call(this)};BG.inherits(i,BG.Symbology),i.prototype.translate=function(i){var t=BG.Symbology.prototype.translate.call(this,i);return[this.chrToVal["Start B"]].concat(t)},i.prototype.checksum=function(i){return i.reduce((i,t,n)=>i+t*n,i[0])%103},i.prototype.addMeta=function(i){return i.concat([this.checksum(i),this.chrToVal.Stop])},i.prototype.mapping=[{chr:" ",bin:"11011001100",val:0},{chr:"!",bin:"11001101100",val:1},{chr:'"',bin:"11001100110",val:2},{chr:"#",bin:"10010011000",val:3},{chr:"$",bin:"10010001100",val:4},{chr:"%",bin:"10001001100",val:5},{chr:"&",bin:"10011001000",val:6},{chr:"'",bin:"10011000100",val:7},{chr:"(",bin:"10001100100",val:8},{chr:")",bin:"11001001000",val:9},{chr:"*",bin:"11001000100",val:10},{chr:"+",bin:"11000100100",val:11},{chr:",",bin:"10110011100",val:12},{chr:"-",bin:"10011011100",val:13},{chr:".",bin:"10011001110",val:14},{chr:"/",bin:"10111001100",val:15},{chr:"0",bin:"10011101100",val:16},{chr:"1",bin:"10011100110",val:17},{chr:"2",bin:"11001110010",val:18},{chr:"3",bin:"11001011100",val:19},{chr:"4",bin:"11001001110",val:20},{chr:"5",bin:"11011100100",val:21},{chr:"6",bin:"11001110100",val:22},{chr:"7",bin:"11101101110",val:23},{chr:"8",bin:"11101001100",val:24},{chr:"9",bin:"11100101100",val:25},{chr:":",bin:"11100100110",val:26},{chr:";",bin:"11101100100",val:27},{chr:"<",bin:"11100110100",val:28},{chr:"=",bin:"11100110010",val:29},{chr:">",bin:"11011011000",val:30},{chr:"?",bin:"11011000110",val:31},{chr:"@",bin:"11000110110",val:32},{chr:"A",bin:"10100011000",val:33},{chr:"B",bin:"10001011000",val:34},{chr:"C",bin:"10001000110",val:35},{chr:"D",bin:"10110001000",val:36},{chr:"E",bin:"10001101000",val:37},{chr:"F",bin:"10001100010",val:38},{chr:"G",bin:"11010001000",val:39},{chr:"H",bin:"11000101000",val:40},{chr:"I",bin:"11000100010",val:41},{chr:"J",bin:"10110111000",val:42},{chr:"K",bin:"10110001110",val:43},{chr:"L",bin:"10001101110",val:44},{chr:"M",bin:"10111011000",val:45},{chr:"N",bin:"10111000110",val:46},{chr:"O",bin:"10001110110",val:47},{chr:"P",bin:"11101110110",val:48},{chr:"Q",bin:"11010001110",val:49},{chr:"R",bin:"11000101110",val:50},{chr:"S",bin:"11011101000",val:51},{chr:"T",bin:"11011100010",val:52},{chr:"U",bin:"11011101110",val:53},{chr:"V",bin:"11101011000",val:54},{chr:"W",bin:"11101000110",val:55},{chr:"X",bin:"11100010110",val:56},{chr:"Y",bin:"11101101000",val:57},{chr:"Z",bin:"11101100010",val:58},{chr:"[",bin:"11100011010",val:59},{chr:"\\",bin:"11101111010",val:60},{chr:"]",bin:"11001000010",val:61},{chr:"^",bin:"11110001010",val:62},{chr:"_",bin:"10100110000",val:63},{chr:"`",bin:"10100001100",val:64},{chr:"a",bin:"10010110000",val:65},{chr:"b",bin:"10010000110",val:66},{chr:"c",bin:"10000101100",val:67},{chr:"d",bin:"10000100110",val:68},{chr:"e",bin:"10110010000",val:69},{chr:"f",bin:"10110000100",val:70},{chr:"g",bin:"10011010000",val:71},{chr:"h",bin:"10011000010",val:72},{chr:"i",bin:"10000110100",val:73},{chr:"j",bin:"10000110010",val:74},{chr:"k",bin:"11000010010",val:75},{chr:"l",bin:"11001010000",val:76},{chr:"m",bin:"11110111010",val:77},{chr:"n",bin:"11000010100",val:78},{chr:"o",bin:"10001111010",val:79},{chr:"p",bin:"10100111100",val:80},{chr:"q",bin:"10010111100",val:81},{chr:"r",bin:"10010011110",val:82},{chr:"s",bin:"10111100100",val:83},{chr:"t",bin:"10011110100",val:84},{chr:"u",bin:"10011110010",val:85},{chr:"v",bin:"11110100100",val:86},{chr:"w",bin:"11110010100",val:87},{chr:"x",bin:"11110010010",val:88},{chr:"y",bin:"11011011110",val:89},{chr:"z",bin:"11011110110",val:90},{chr:"{",bin:"11110110110",val:91},{chr:"|",bin:"10101111000",val:92},{chr:"}",bin:"10100011110",val:93},{chr:"~",bin:"10001011110",val:94},{chr:"del",bin:"10111101000",val:95},{chr:"Fnc 3",bin:"10111100010",val:96},{chr:"Fnc 2",bin:"11110101000",val:97},{chr:"Shift A",bin:"11110100010",val:98},{chr:"Code C",bin:"10111011110",val:99},{chr:"Fnc 4",bin:"10111101110",val:100},{chr:"Code A",bin:"11101011110",val:101},{chr:"Fnc 1",bin:"11110101110",val:102},{chr:"Start A",bin:"11010000100",val:103},{chr:"Start B",bin:"11010010000",val:104},{chr:"Start C",bin:"11010011100",val:105},{chr:"Stop",bin:"1100011101011",val:void 0}]}(),function(){void 0===window.BG&&(window.BG={});var t=window.BG.BGen=function(i){if(!i.hasOwnProperty("ctx"))throw"Need canvas context";if(!i.hasOwnProperty("canvas"))throw"Need canvas";if(!i.hasOwnProperty("input"))throw"Need input";this.symbology=new BG[i.symbology||"Code128B"],this.ctx=i.ctx,this.canvas=i.canvas,this.input=i.input,this.ctx.imageSmoothingEnabled=!1,this.setHeightAndWidth(i.height||20,i.width||1),this.input.oninput=this.getInput.bind(this),this.heightInput=i.heightInput,this.widthInput=i.widthInput,this.heightInput.oninput=(()=>{this.setHeight(this.heightInput.value)}),this.widthInput.oninput=(()=>{this.setWidth(this.widthInput.value)})};t.prototype.getInput=function(){var[i,t]=this.symbology.encode(this.input.value);this.clearCanvas(),this.drawBarCode(i)},t.prototype.clearCanvas=function(){this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.restore()},t.prototype.drawBarCode=function(t){this.ctx.save();var n=t.length*this.width,h=Math.round(this.canvas.width/2-n/2);for(i in t)"1"==t[i]&&this.ctx.putImageData(this.line,i*this.width+h,0);this.ctx.restore()},t.prototype.setHeight=function(i){this.setHeightAndWidth(i,this.width)},t.prototype.setWidth=function(i){this.setHeightAndWidth(this.height,i)},t.prototype.setHeightAndWidth=function(i,t){this.height=i,this.width=t,this.line=ctx.createImageData(t,i);for(var n=this.line.data,h=0;h<n.length;h+=4)n[h]=0,n[h+1]=0,n[h+2]=0,n[h+3]=255;this.getInput()}}();
	</script>
	<style type='text/css'>
		canvas { 
			image-rendering: optimizeSpeed; 
			image-rendering: -moz-crisp-edges; 
			image-rendering: -webkit-optimize-contrast; 
			image-rendering: -o-crisp-edges;
			image-rendering: optimize-contrast;
			-ms-interpolation-mode: nearest-neighbor; 
		}
		body {
			text-align: center;
		}
		.canvas-box {
			padding-top: 10%;
		}
		.settings {
			padding-top: 10%;
		}
		label {
			display: block;
		}
		label > input {
			width: 4em;
		}

	</style>
</head>
<body>
	<div class='canvas-box'>
		<canvas id='out' width=500px height=100px>
		</canvas>
	<br>
	<div class='input-box'>
		<input id='in'>
	</div>
	<div class='settings'>
		<label>Bar height: 
			<input id='setHeight' type=number value=20 size="2">
		</label>
		<label>Bar width:
			<input id='setWidth' type=number value=1 size="2">
		</label>
	</div>

	<script type='text/javascript'>
		var input  = document.getElementById('in');
		var canvas = document.getElementById('out');
		var ctx    = canvas.getContext('2d');
		var hInp   = document.getElementById('setHeight');
		var wInp   = document.getElementById('setWidth');
		var gen    = new BG.BGen({
			'ctx'    : ctx
			,'canvas': canvas
			,'input' : input
			,'height': hInp.value
			,'width' : wInp.value
			,'heightInput': hInp
			,'widthInput' : wInp
		});
	</script>
</body>
</html>